{{ define "main" }}
<section class="section-padding">
  <div class="container">
    <h2>Dashboard</h2>
    <p><strong>First Name:</strong> <span id="firstName"></span></p>
    <p><strong>Last Name:</strong> <span id="lastName"></span></p>
    <p><strong>Email:</strong> <span id="email"></span></p>
    <p><strong>Organization:</strong> <span id="organization"></span></p>
  </div>
</section>

<script src="/js/auth.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const client = await window.auth0ClientPromise;
    const isAuthenticated = await client.isAuthenticated();
    if (!isAuthenticated) return window.location.href = "/";

    const user = await client.getUser();
    document.getElementById("firstName").textContent = user.given_name || "";
    document.getElementById("lastName").textContent = user.family_name || "";
    document.getElementById("email").textContent = user.email || "";
    document.getElementById("organization").textContent = user.organization || "";
  });
</script>
{{ end }}
